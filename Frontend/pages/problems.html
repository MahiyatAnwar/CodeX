<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice Problems - CodeX</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/header.css">
    <link rel="stylesheet" href="../assets/css/footer.css">
    <link rel="stylesheet" href="../assets/css/problems.css">
</head>
<body>
    <!-- Header Component -->
    <div id="header"></div>

    <!-- Main Content -->
    <main class="main-content problems-page">
        <div class="container-fluid">
            <div class="row">
                <!-- Problems Sidebar -->
                <div class="col-lg-3 col-md-4 problems-sidebar">
                    <div class="sidebar-content">
                        <!-- Filter Section -->
                        <div class="filter-section">
                            <h5>Filters</h5>
                            
                            <!-- Difficulty Filter -->
                            <div class="filter-group">
                                <label class="filter-label">Difficulty</label>
                                <div class="filter-options">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="difficulty-easy" checked>
                                        <label class="form-check-label" for="difficulty-easy">
                                            <span class="difficulty-badge easy">Easy</span>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="difficulty-medium" checked>
                                        <label class="form-check-label" for="difficulty-medium">
                                            <span class="difficulty-badge medium">Medium</span>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="difficulty-hard">
                                        <label class="form-check-label" for="difficulty-hard">
                                            <span class="difficulty-badge hard">Hard</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Topic Filter -->
                            <div class="filter-group">
                                <label class="filter-label">Topic</label>
                                <select class="form-select" id="topic-filter">
                                    <option value="all">All Topics</option>
                                    <option value="arrays">Arrays & Strings</option>
                                    <option value="sorting">Sorting Algorithms</option>
                                    <option value="searching">Searching Algorithms</option>
                                    <option value="linkedlist">Linked Lists</option>
                                    <option value="stacks">Stacks & Queues</option>
                                </select>
                            </div>

                            <!-- Status Filter -->
                            <div class="filter-group">
                                <label class="filter-label">Status</label>
                                <div class="filter-options">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="status-solved">
                                        <label class="form-check-label" for="status-solved">
                                            <i class="fas fa-check-circle text-success"></i> Solved
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="status-unsolved" checked>
                                        <label class="form-check-label" for="status-unsolved">
                                            <i class="far fa-circle text-muted"></i> Unsolved
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <button class="btn btn-primary btn-sm w-100 mt-3" id="apply-filters">
                                Apply Filters
                            </button>
                        </div>

                        <!-- Problems List -->
                        <div class="problems-list-section">
                            <h5>Problems</h5>
                            <div class="problems-list" id="problems-list">
                                <!-- Problems will be loaded here dynamically -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Problem Details & Code Editor -->
                <div class="col-lg-9 col-md-8 problem-details">
                    <div class="problem-content">
                        <!-- Problem Header -->
                        <div class="problem-header">
                            <div class="problem-title-section">
                                <h2 id="problem-title">Two Sum</h2>
                                <div class="problem-meta">
                                    <span class="difficulty-badge easy">Easy</span>
                                    <span class="topic-tag">Arrays</span>
                                    <span class="acceptance-rate">65% Acceptance</span>
                                </div>
                            </div>
                            <div class="problem-actions">
                                <button class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-heart"></i> Save
                                </button>
                                <button class="btn btn-outline-secondary btn-sm">
                                    <i class="fas fa-share"></i> Share
                                </button>
                            </div>
                        </div>

                        <!-- Problem Description -->
                        <div class="problem-description">
                            <h5>Description</h5>
                            <div id="problem-description-content">
                                <p>Given an array of integers <code>nums</code> and an integer <code>target</code>, return indices of the two numbers such that they add up to <code>target</code>.</p>
                                
                                <p>You may assume that each input would have <strong>exactly one solution</strong>, and you may not use the same element twice.</p>
                                
                                <p>You can return the answer in any order.</p>
                                
                                <h6>Example 1:</h6>
                                <pre>Input: nums = [2,7,11,15], target = 9
Output: [0,1]
Explanation: Because nums[0] + nums[1] == 9, we return [0, 1].</pre>
                                
                                <h6>Example 2:</h6>
                                <pre>Input: nums = [3,2,4], target = 6
Output: [1,2]</pre>
                                
                                <h6>Example 3:</h6>
                                <pre>Input: nums = [3,3], target = 6
Output: [0,1]</pre>
                                
                                <h6>Constraints:</h6>
                                <ul>
                                    <li><code>2 <= nums.length <= 10<sup>4</sup></code></li>
                                    <li><code>-10<sup>9</sup> <= nums[i] <= 10<sup>9</sup></code></li>
                                    <li><code>-10<sup>9</sup> <= target <= 10<sup>9</sup></code></li>
                                    <li><strong>Only one valid answer exists.</strong></li>
                                </ul>
                            </div>
                        </div>

                        <!-- Code Editor Section -->
                        <div class="code-editor-section">
                            <div class="editor-header">
                                <h5>Code Editor</h5>
                                <div class="editor-options">
                                    <select class="form-select form-select-sm" id="language-select">
                                        <option value="python">Python</option>
                                        <option value="java">Java</option>
                                        <option value="cpp">C++</option>
                                        <option value="javascript">JavaScript</option>
                                    </select>
                                    <button class="btn btn-sm btn-outline-secondary">
                                        <i class="fas fa-redo"></i> Reset
                                    </button>
                                </div>
                            </div>
                            
                            <div class="code-editor">
                                <textarea id="code-area" class="form-control" rows="15" placeholder="Write your solution here...">def twoSum(nums, target):
    # Your code here
    pass</textarea>
                            </div>
                            
                            <div class="editor-actions">
                                <button class="btn btn-outline-primary" id="run-code">
                                    <i class="fas fa-play"></i> Run Code
                                </button>
                                <button class="btn btn-success" id="submit-code">
                                    <i class="fas fa-paper-plane"></i> Submit
                                </button>
                            </div>
                        </div>

                        <!-- Test Cases & Results -->
                        <div class="test-results-section">
                            <div class="results-header">
                                <h5>Test Results</h5>
                                <div class="results-summary">
                                    <span class="passed-tests">0 passed</span>
                                    <span class="total-tests">/ 3 test cases</span>
                                </div>
                            </div>
                            
                            <div class="test-cases">
                                <div class="test-case">
                                    <div class="test-case-header">
                                        <span class="test-case-number">Test Case 1</span>
                                        <span class="test-status pending"><i class="fas fa-clock"></i> Pending</span>
                                    </div>
                                    <div class="test-case-details">
                                        <div class="input-output">
                                            <strong>Input:</strong> nums = [2,7,11,15], target = 9
                                        </div>
                                        <div class="input-output">
                                            <strong>Expected Output:</strong> [0,1]
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="test-case">
                                    <div class="test-case-header">
                                        <span class="test-case-number">Test Case 2</span>
                                        <span class="test-status pending"><i class="fas fa-clock"></i> Pending</span>
                                    </div>
                                    <div class="test-case-details">
                                        <div class="input-output">
                                            <strong>Input:</strong> nums = [3,2,4], target = 6
                                        </div>
                                        <div class="input-output">
                                            <strong>Expected Output:</strong> [1,2]
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="test-case">
                                    <div class="test-case-header">
                                        <span class="test-case-number">Test Case 3</span>
                                        <span class="test-status pending"><i class="fas fa-clock"></i> Pending</span>
                                    </div>
                                    <div class="test-case-details">
                                        <div class="input-output">
                                            <strong>Input:</strong> nums = [3,3], target = 6
                                        </div>
                                        <div class="input-output">
                                            <strong>Expected Output:</strong> [0,1]
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Component -->
    <div id="footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Load header and footer components
        fetch('../components/header.html')
            .then(response => response.text())
            .then(data => document.getElementById('header').innerHTML = data);
        
        fetch('../components/footer.html')
            .then(response => response.text())
            .then(data => document.getElementById('footer').innerHTML = data);

        // Sample problems data
        const problems = [
            {
                id: 1,
                title: "Two Sum",
                difficulty: "easy",
                topic: "arrays",
                acceptance: "65%",
                isSolved: true
            },
            {
                id: 2,
                title: "Reverse String",
                difficulty: "easy", 
                topic: "arrays",
                acceptance: "78%",
                isSolved: false
            },
            {
                id: 3,
                title: "Valid Palindrome",
                difficulty: "easy",
                topic: "arrays", 
                acceptance: "45%",
                isSolved: false
            },
            {
                id: 4,
                title: "Best Time to Buy and Sell Stock",
                difficulty: "easy",
                topic: "arrays",
                acceptance: "52%",
                isSolved: false
            },
            {
                id: 5,
                title: "Merge Sorted Arrays",
                difficulty: "medium",
                topic: "arrays",
                acceptance: "42%",
                isSolved: false
            },
            {
                id: 6,
                title: "Valid Parentheses", 
                difficulty: "easy",
                topic: "stacks",
                acceptance: "40%",
                isSolved: false
            }
        ];

        // Load problems list
        function loadProblemsList() {
            const problemsList = document.getElementById('problems-list');
            problemsList.innerHTML = '';
            
            problems.forEach(problem => {
                const problemElement = document.createElement('div');
                problemElement.className = `problem-item ${problem.isSolved ? 'solved' : ''}`;
                problemElement.innerHTML = `
                    <div class="problem-item-content">
                        <h6>${problem.title}</h6>
                        <div class="problem-item-meta">
                            <span class="difficulty-badge ${problem.difficulty}">${problem.difficulty}</span>
                            <span class="acceptance">${problem.acceptance}</span>
                        </div>
                    </div>
                    ${problem.isSolved ? '<i class="fas fa-check-circle solved-icon"></i>' : ''}
                `;
                
                problemElement.addEventListener('click', () => loadProblemDetails(problem));
                problemsList.appendChild(problemElement);
            });
        }

        // Load problem details
        function loadProblemDetails(problem) {
            document.getElementById('problem-title').textContent = problem.title;
            // In real implementation, you would fetch full problem details from backend
        }

        // Run code simulation
        document.getElementById('run-code').addEventListener('click', function() {
            const testCases = document.querySelectorAll('.test-case');
            testCases.forEach(testCase => {
                const status = testCase.querySelector('.test-status');
                status.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Running';
                status.className = 'test-status running';
                
                // Simulate API call delay
                setTimeout(() => {
                    const random = Math.random();
                    if (random > 0.3) {
                        status.innerHTML = '<i class="fas fa-check-circle text-success"></i> Passed';
                        status.className = 'test-status passed';
                    } else {
                        status.innerHTML = '<i class="fas fa-times-circle text-danger"></i> Failed';
                        status.className = 'test-status failed';
                    }
                }, 1000);
            });
        });

        // Submit code simulation
        document.getElementById('submit-code').addEventListener('click', function() {
            const btn = this;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                alert('Code submitted successfully!');
            }, 2000);
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadProblemsList();
            if (problems.length > 0) {
                loadProblemDetails(problems[0]);
            }
        });
    </script>
</body>
</html>